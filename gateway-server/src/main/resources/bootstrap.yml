server:
  port: 5555

logging:
  path: E:\demo_code\cloud\logs
  config: classpath:logback-spring.xml


#默认为true可不配置
feign:
#  okhttp:
#    enabled: true
  hystrix:
    enabled: true
  client:
    config:
      default:  # 服务名，default表示所有服务
        connectTimeout: 5000  #请求连接超时
        readTimeout: 5000  #请求处理超时
        loggerLevel: none  # full | basic | none | headers

hystrix:
  command:
    default:  # 默认，可具体改为服务名称
      execution:
        timeout:
          enabled: true
        isolation:
          thread:
            timeoutInMilliseconds: 5000 #熔断超时时间

ribbon:
  connectTimeout: 2500 #请求连接的超时时间，默认时间为1秒
  readTimeout: 2500 #请求处理的超时时间
  # 重试
#  OkToRetryOnAllOperations: true  #对所有操作请求都进行重试 false只重试get
  MaxAutoRetries: 1 #对当前实例的重试次数
  MaxAutoRetriesNextServer: 1 #切换实例的重试次数
  OkToRetryOnAllOperations: false


spring:
  application:
    name: gateway-server
  profiles:
    active: dev
  cloud:
#    loadbalancer:
#      retry:
#        enabled: true
    gateway:
      default-filters:
        - name: Hystrix
          args:
            name: fallbackcmd
            fallbackUri: forward:/fallback
#        - name: Retry
#          args:
#            retries: 3
#              series:
#              - SERVER_ERROR
#              methods:
#              - GET
      globalcors:
        cors-configurations:
          '[/**]':
            allow-credentials: true
            allowed-origins: "*"
            allowed-headers: "*"
            allowed-methods: "*"
            max-age: 3600
#    nacos:
#      discovery:
#        server-addr: 127.0.0.1:8848
#        group: DEFAULT_GROUP
#        namespace: 1846c7d2-6bba-4b98-8538-0f7b291d6b41
#      dynamic-route:
#        data-id: gateway-routers
